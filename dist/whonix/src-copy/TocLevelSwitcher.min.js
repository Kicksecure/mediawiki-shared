(function(){if($('#toc').length){let a='ctbc_tocLevelSet';if($('.toclevel-2').length==0)return;let b=$('<div id="toc-level-switcher"><span data-level="all" title="Show all levels"><i class="fas fa-star"></i></span>'+($('.toclevel-3').length==0?'':'<span data-level="two" title="Show 2 levels">2</span>')+'<span data-level="one" title="Show 1 level">1</span>'+'</div>');$('#toc .toctogglecheckbox').length?b.insertAfter($('#toc .toctogglecheckbox')):$('#toc').prepend(b),$('#toc').addClass('toc-level-switcher-enhanced');let d=$('<span class="toc-level-switcher-opener"><i class="fas fa-plus"></i></span>'),e=$('<span class="toc-level-switcher-counter">(<span class="count"></span>)</span>');$('#toc-level-switcher > span').on('click',function(){$(this).siblings().removeClass('active'),$(this).addClass('active');let b=$(this).attr('data-level');$('body').removeClass(a+'_'+Cookies.get(a)),b=='all'?Cookies.remove(a):(Cookies.set(a,b,{sameSite:'strict'}),$('body').addClass(a+'_'+b)),b=='all'?$('#toc').removeAttr('data-level'):$('#toc').attr('data-level',b),$('.toc-level-switcher-opener').remove(),$('.toc-level-switcher-counter').remove(),$('.toclevel-1, .toclevel-2').removeClass('toc-level-switcher-show');let c=function(){let a=$(this),g=a.hasClass('toclevel-1')?'.toclevel-2':'.toclevel-3',c=a.find(g).length;if(c==0)return;let f=e.clone();f.find('.count').text(c),a.find('.toctext').eq(0).append(f);let b=d.clone();a.prepend(b),b.on('click',function(){a.addClass('toc-level-switcher-show'),b.remove()})};switch(b){case'one':$('.toclevel-1').each(c),$('.toclevel-2').each(c);break;case'two':$('.toclevel-2').each(c);break}});let c=Cookies.get(a);c&&$(`#toc-level-switcher > span[data-level=${c}]`)[0].click()}})()