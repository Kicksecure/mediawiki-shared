(function(){if($("#toc").length){let e="ctbc_tocLevelSet";if($(".toclevel-2").length==0)return;let t=$('<div id="toc-level-switcher"><span data-level="all" title="Show all levels"><i class="fas fa-star"></i></span>'+($(".toclevel-3").length==0?"":'<span data-level="two" title="Show 2 levels">2</span>')+'<span data-level="one" title="Show 1 level">1</span></div>');$("#toc .toctogglecheckbox").length?t.insertAfter($("#toc .toctogglecheckbox")):$("#toc").prepend(t),$("#toc").addClass("toc-level-switcher-enhanced");let s=$('<span class="toc-level-switcher-opener"><i class="fas fa-plus"></i></span>'),o=$('<span class="toc-level-switcher-counter">(<span class="count"></span>)</span>');$("#toc-level-switcher > span").on("click",function(){$(this).siblings().removeClass("active"),$(this).addClass("active");let t=$(this).attr("data-level");$("body").removeClass(e+"_"+Cookies.get(e)),t=="all"?Cookies.remove(e):(Cookies.set(e,t,{sameSite:"strict"}),$("body").addClass(e+"_"+t)),t=="all"?$("#toc").removeAttr("data-level"):$("#toc").attr("data-level",t),$(".toc-level-switcher-opener").remove(),$(".toc-level-switcher-counter").remove(),$(".toclevel-1, .toclevel-2").removeClass("toc-level-switcher-show");let n=function(){let e=$(this),a=e.hasClass("toclevel-1")?".toclevel-2":".toclevel-3",n=e.find(a).length;if(n==0)return;let i=o.clone();i.find(".count").text(n),e.find(".toctext").eq(0).append(i);let t=s.clone();e.prepend(t),t.on("click",function(){e.addClass("toc-level-switcher-show"),t.remove()})};switch(t){case"one":$(".toclevel-1").each(n),$(".toclevel-2").each(n);break;case"two":$(".toclevel-2").each(n);break}});let n=Cookies.get(e);n&&$(`#toc-level-switcher > span[data-level=${n}]`)[0].click()}})()