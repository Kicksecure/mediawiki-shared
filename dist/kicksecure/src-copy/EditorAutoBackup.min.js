(function(){$('#editform').length&&setTimeout(function(){let b=!1;var c;$('#editform .ace_editor').length&&($('#editform .ace_editor').attr('id','editform-ace-editor'),c=ace.edit('editform-ace-editor')),$('#wikiEditor-ui-toolbar').append($('<i class="editor-auto-backup far fa-save"></i>'));let a=$('<div class="mini-modal" id="editorAutoBackupModal"> <div class="info">Your latest AutoBackup</div> <div class="title"></div> <div class="date"></div><textarea></textarea></div>');$('body').append(a);function d(a){let b=c&&!a?ace.edit('ace_editor').getValue():$('#wpTextbox1').val();localStorage.setItem('wikiEditorAutoBackup',JSON.stringify({content:b,date:(new Date).toLocaleString(),title:$('#firstHeading').text()}))}$('.save-and-continue').on('click',d),$('#editform').on('submit',function(a){if(b)return!0;a.preventDefault();let c=document.activeElement;return d(!0),setTimeout(function(){b=!0,$('#editform')[0].requestSubmit(c)},100),!1}),$('#wikiEditor-ui-toolbar .editor-auto-backup').on('click',function(){let b=JSON.parse(localStorage.getItem('wikiEditorAutoBackup'));a.find('.title').text(b.title),a.find('.date').text(b.date),a.find('textarea').val(b.content),$('#editorAutoBackupModal').miniModal('show')})},500)})()